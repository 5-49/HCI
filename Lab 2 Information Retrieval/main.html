
<!DOCTYPE html>
<html>
<head>
<title>1854025 YangJing</title>
<link href="style.css" rel="stylesheet" type="text/css" /><!--引用css文件-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
<meta http-equiv='cache-control' content="no-cache, must-revalidate, post-check=0, pre-check=0">
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'>
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>
    <style>
        .like{
            width: 80px;
            height: 50px;
            color: hotpink;
            font-size:30px;
            background-color: pink;
            cursor: pointer;
            position: relative;
        }
    </style>
</head>

<body style="background: pink;>

    <div class="navbar">
        <div class="navbar-inner">
            <h1 class="text-center" style="color:hotpink;font-family:Comic Sans MS;"><b>Find Similar Images</b>&nbsp;<a class="navbar-brand" href="">
                             <img src="/images/logo1.jpg" style="height:40px;" ></a>
	    </h1>
        </div>
    </div>
    <div><br></br><br></br>
    </div>

    <center></center>

    <div id="main" class="container">
        <!--窗口阴影-->
        <table class="table" style="background: white;border: 1px solid beige;
        box-shadow: 3px 5px 15px 0px rgba(0, 0, 0, 0.2), 3px 5px 30px 0 rgba(0, 0, 0, 0.19);margin-top:20px;">
             <tr style="background: MistyRose;color:hotpink; font-family:MV Boli; font-size: 20px;"><td><b>Please upload the query image</b></td><td><b></b></td></tr>
            <tr><td><form method=post enctype=multipart/form-data id='formBox' name="form">
                        <!--<input data-bind="value: title" type="text" id="inputTask" placeholder="Path to the image" style="width: 150px;">-->
			<input type="file" id="chooseImage" name="file" required />
			<input type=submit value ="Search!" onclick="fun()">
                <h3 id="preview" class="text-center" style="display:none; color:hotpink; font-family:Comic Sans MS;font-weight:bold;margin-top:15px;"><b>The query image is as below:</b>
        </h3>
                <center><img id="query" value='custom' alt="lorem ipsum dolor sit" data-address='' style="display:none;height:200px;margin-top:10px;" >
            </center></form></td><td><b></b></td></tr>

                <tr id="row1" style="display:none;"><td><a href=""><button id="clear" style="display:none;">Clear</button></a></td><td></td>

            </tr>
        </table>
    </div>

    <center>
    <img id="load" src="/images/loading.gif" style="height:100px;weight:100px;display:none;margin-top:40px;" >
        <h3 id="result" class="text-center" style="display:none;color:hotpink; font-family:Comic Sans MS;font-weight:bold;"><b>There are 9 similar pictures.</b>
        </h3>
            <h2 id="loading" class="text-center" style="display:none;color:hotpink; font-family:Comic Sans MS;font-weight:bold;"><b>Searching......</b>
        </h2>
    </center>

    <center>

    </center>

    <div id="main" class="container">
       <table id="table" class="table" style="background: pink; border: 0px pink; display:none;" ><tbody>
        <tr><td style="
                transition: 0.3s;
                width: 200px;
                height: 300px;
                padding-top: 0px;
                padding-bottom: 0px;
                padding-right: 0px;
                padding-left: 0px;
                border-left-width: 0px;
                border-bottom-width: 0px;
                border-right-width: 0px;
                background: pink;
               ">
    		<img id="img0" src="" alt="Norway" style="

                transition: 0.3s;
                width: 200px;
                height: 200px;
                padding-top: 5px;
                padding-bottom: 5px;
                padding-right: 0px;
                padding-left: 5px;
                border-left-width: 0px;
                border-bottom-width: 0px;
                border-right-width: 0px;
                " width="200" height="200">
                <div class="like">Like</div>
            </td>

             <td style="
                transition: 0.3s;
                width: 200px;
                height: 300px;
                padding-top: 0px;
                padding-bottom: 0px;
                padding-right: 0px;
                padding-left: 0px;
                border-left-width: 0px;
                border-bottom-width: 0px;
                border-right-width: 0px;
                background: pink;
            ">
    		<img id="img1" src="" alt="Norway" style="

                transition: 0.3s;
                width: 200px;
                height: 200px;
                padding-top: 5px;
                padding-bottom: 5px;
                padding-right: 0px;
                padding-left: 5px;
                border-left-width: 0px;
                border-bottom-width: 0px;border-right-width: 0px;
            " width="200" height="200">
            <div class="like">Like</div>
             </td>

             <td style="
                transition: 0.3s;
                width: 200px;
                height: 300px;
                padding-top: 0px;
                padding-bottom: 0px;
                padding-right: 0px;
                padding-left: 0px;
                border-left-width: 1px;
                border-bottom-width: 1px;
                border-right-width: 1px;
                background: pink;
            ">
    		<img id="img2" src="" alt="Norway" style="

                transition: 0.3s;
                width: 200px;
                height: 200px;
                padding-top: 5px;
                padding-bottom: 5px;
                padding-right: 0px;
                padding-left: 5px;
                border-left-width: 1px;
                border-bottom-width: 0px;border-right-width: 1px;
            " width="200" height="200">
                <div class="like">Like</div>
             </td>
        </tr>

         <tr style="background: white;"><td style="
                transition: 0.3s;
                width: 200px;
                height: 300px;
                padding-top: 0px;
                padding-bottom: 0px;
                padding-right: 0px;
                padding-left: 0px;
                border-left-width: 1px;
                border-bottom-width: 1px;
                border-right-width: 1px;
                background: pink;
            ">
    		<img id="img3" src="" alt="Norway" style="

                transition: 0.3s;
                width: 200px;
                height: 200px;
                padding-top: 5px;
                padding-bottom: 5px;
                padding-right: 0px;
                padding-left: 5px;
                border-left-width: 1px;
                border-bottom-width: 0px;border-right-width: 1px;
            " width="200" height="200">
            <div class="like">Like</div>
             </td>
             <td style="
                transition: 0.3s;
                width: 200px;
                height: 300px;
                padding-top: 0px;
                padding-bottom: 0px;
                padding-right: 0px;
                padding-left: 0px;
                border-left-width: 1px;
                border-bottom-width: 1px;border-right-width: 1px;background: pink;
            ">
    		<img id="img4" src="" alt="Norway" style="

                transition: 0.3s;
                width: 200px;
                height: 200px;
                padding-top: 5px;
                padding-bottom: 5px;
                padding-right: 0px;
                padding-left: 5px;
                border-left-width: 1px;
                border-bottom-width: 0px;border-right-width: 1px;
            " width="200" height="200">
                <div class="like">Like</div>
             </td>
             <td style="
                transition: 0.3s;
                width: 200px;
                height: 300px;
                padding-top: 0px;
                padding-bottom: 0px;
                padding-right: 0px;
                padding-left: 0px;
                border-left-width: 1px;
                border-bottom-width: 1px;border-right-width: 1px;background: pink;
            ">
    		<img id="img5" src="" alt="Norway" style="

                transition: 0.3s;
                width: 200px;
                height: 200px;
                padding-top: 5px;
                padding-bottom: 5px;
                padding-right: 0px;
                padding-left: 5px;
                border-left-width: 1px;
                border-bottom-width: 0px;border-right-width: 1px;
            " width="200" height="200">
                <div class="like">Like</div>
             </td>
         </tr>

	<tr><td style="
            transition: 0.3s;
            width: 200px;
            height: 300px;
            padding-top: 0px;
            padding-bottom: 0px;
            padding-right: 0px;
            padding-left: 0px;
            border-left-width: 1px;
            border-bottom-width: 1px;border-right-width: 1px;background: pink;
            ">
    		<img id="img6" src="" alt="Norway" style="

                transition: 0.3s;
                width: 200px;
                height: 200px;
                padding-top: 5px;
                padding-bottom: 5px;
                padding-right: 0px;
                padding-left: 5px;
                border-left-width: 1px;
                border-bottom-width: 0px;border-right-width: 1px;
            " width="200" height="200">
                <div class="like">Like</div>
             </td>
             <td style="
                transition: 0.3s;
                width: 200px;
                height: 300px;
                padding-top: 0px;
                padding-bottom: 0px;
                padding-right: 0px;
                padding-left: 0px;
                border-left-width: 1px;
                border-bottom-width: 1px;border-right-width: 1px;background: pink;
            ">
    		<img id="img7" src="" alt="Norway" style="

                transition: 0.3s;
                width: 200px;
                height: 200px;
                padding-top: 5px;
                padding-bottom: 5px;
                padding-right: 0px;
                padding-left: 5px;
                border-left-width: 1px;
                border-bottom-width: 0px;border-right-width: 1px;
            " width="200" height="200">
                <div class="like">Like</div>
             </td>
             <td style="
                transition: 0.3s;
                width: 200px;
                height: 300px;
                padding-top: 0px;
                padding-bottom: 0px;
                padding-right: 0px;
                padding-left: 0px;
                border-left-width: 1px;
                border-bottom-width: 1px;border-right-width: 1px;background: pink;
            ">
    		<img id="img8" src="" alt="Norway" style="

                transition: 0.3s;
                width: 200px;
                height: 200px;
                padding-top: 5px;
                padding-bottom: 5px;
                padding-right: 0px;
                padding-left: 5px;
                border-left-width: 1px;
                border-bottom-width: 0px;border-right-width: 1px;
            " width="200" height="200">
                <div class="like">Like</div>
             </td>
         </tr></tbody>
       </table>



</div>
<script>
    $(function () {
        $('.like').click(function () {
            var tag=document.createElement('span')
            tag.style.color='hotpink';
            tag.style.position='absolute';
            tag.innerHTML='&#10084'

            var top=5;
            var left=5;
            var fontsize=12;
            var opacity=1;

             tag.style.fontSize=fontsize+'px';
             tag.style.top=top+'px';
             tag.style.left=left+'px';
             tag.opacity=opacity;
             $(this).append(tag);

            var obj=setInterval(function () {
                top-=15;
                left+=5;
                fontsize+=12;
                opacity-=0.2;

                tag.style.fontSize=fontsize+'px';
                tag.style.top=top+'px';
                tag.style.left=left+'px';
                tag.opacity=opacity;

                if(opacity<0){
                    clearInterval(obj);
                    tag.remove();
                }
            },100)
        })
    })
</script>

    <script type="text/javascript">

    //下面这个函数显示要搜索的图片
      $('#chooseImage').on('change',function(){
    	var filePath = $(this).val(),         //获取到input的value，里面是文件的路径
    		fileFormat = filePath.substring(filePath.lastIndexOf(".")).toLowerCase(),
    		src = window.URL.createObjectURL(this.files[0]); //转成可以在本地预览的格式

        $('#preview').show();
        $('#query').attr('src',src);
        $('#query').show();
    });

	function myFunction(){
	document.getElementById("predictedResult").innerHTML= "";
	$('#clear').hide();
	}
		function fun(){
		$('#load').show();
		$('#loading').show();
        $('#result').hide();
   		$("form").submit(function(evt){

		evt.preventDefault();
     		var formData = new FormData($(this)[0]);

   		$.ajax({
      		url: 'imgUpload',
       		type: 'POST',
      		 data: formData,
      		 //async: false,
      		 cache: false,
      		 contentType: false,
      		 enctype: 'multipart/form-data',
      		 processData: false,

      		 success: function (response) {
		 $('#load').hide();
		 $('#loading').hide();

        $('#result').show();

		 $('#row1').show();
                document.getElementById("img0").src = response.image0;
		        document.getElementById("img1").src = response.image1;
                document.getElementById("img2").src = response.image2;
                document.getElementById("img3").src = response.image3;
                document.getElementById("img4").src = response.image4;
                document.getElementById("img5").src = response.image5;
                document.getElementById("img6").src = response.image6;
                document.getElementById("img7").src = response.image7;
                document.getElementById("img8").src = response.image8;
                $('#table').show();
		        $('#clear').show();
      		 }
   		});
   return false;
 })};

    </script>
</body>
</html>
